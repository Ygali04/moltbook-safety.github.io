<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { margin: 0; padding: 0; background: rgba(15,15,35,1); }
        #chart { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="chart"></div>
    <script>
        var labels = ['Harm', 'Deception', 'Power', 'Sycophancy'];
        var means = [0.09, 1.45, 2.50, 2.55];
        var p95s = [0, 4, 7, 5];
        var colors = ['#ff6b6b', '#a78bfa', '#fbbf24', '#4ecdc4'];
        
        var trace1 = {
            name: 'Mean',
            y: labels,
            x: means,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: colors,
                line: { color: 'rgba(255,255,255,0.2)', width: 1 }
            },
            text: means.map(v => v.toFixed(1)),
            textposition: 'inside',
            insidetextanchor: 'end',
            textfont: { color: 'white', size: 16, family: 'JetBrains Mono, monospace' },
            hovertemplate: '<b>%{y}</b><br>Mean: %{x:.2f}<extra></extra>'
        };
        
        var trace2 = {
            name: 'P95',
            y: labels,
            x: p95s,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: colors.map(c => c + '80'),
                line: { color: colors, width: 2 }
            },
            text: p95s.map(v => v.toFixed(0)),
            textposition: 'inside',
            insidetextanchor: 'end',
            textfont: { color: 'white', size: 14, family: 'JetBrains Mono, monospace' },
            opacity: 0.7,
            hovertemplate: '<b>%{y}</b><br>P95: %{x}<extra></extra>'
        };
        
        var layout = {
            title: {
                text: 'Threat Vector Scores',
                font: { size: 20, color: '#f0f0f5', family: 'Outfit, sans-serif' },
                x: 0.5,
                xanchor: 'center'
            },
            paper_bgcolor: 'rgba(15,15,35,1)',
            plot_bgcolor: 'rgba(15,15,35,1)',
            barmode: 'group',
            bargap: 0.3,
            bargroupgap: 0.15,
            xaxis: {
                title: null,
                range: [0, 10],
                showgrid: true,
                gridcolor: 'rgba(255,255,255,0.1)',
                dtick: 2,
                tickfont: { size: 14, color: '#a0a0b0', family: 'JetBrains Mono, monospace' },
                zeroline: false
            },
            yaxis: {
                title: null,
                tickfont: { size: 16, color: '#f0f0f5', family: 'Outfit, sans-serif' },
                automargin: true
            },
            legend: {
                orientation: 'h',
                yanchor: 'bottom',
                y: 1.02,
                xanchor: 'center',
                x: 0.5,
                font: { size: 14, color: '#a0a0b0', family: 'Outfit, sans-serif' }
            },
            margin: { l: 10, r: 30, t: 70, b: 30 },
            autosize: true,
            font: { family: 'Outfit, sans-serif' }
        };
        
        var config = {
            responsive: true,
            displayModeBar: false
        };
        
        Plotly.newPlot('chart', [trace1, trace2], layout, config);
        
        // Dynamic relayout on window resize
        var resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                Plotly.Plots.resize('chart');
            }, 100);
        });
        
        // Also handle orientation changes on mobile
        window.addEventListener('orientationchange', function() {
            setTimeout(function() {
                Plotly.Plots.resize('chart');
            }, 200);
        });
        
        // Initial resize after fonts load
        if (document.fonts && document.fonts.ready) {
            document.fonts.ready.then(function() {
                Plotly.Plots.resize('chart');
            });
        }
    </script>
</body>
</html>
