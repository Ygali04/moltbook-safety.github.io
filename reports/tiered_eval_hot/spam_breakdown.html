<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #1a1a2e;
        }
        .chart-wrapper {
            width: 100%;
            height: 100%;
            min-height: 350px;
        }
        .plotly-graph-div {
            width: 100% !important;
            height: 100% !important;
        }
    </style>
</head>
<body>
    <div class="chart-wrapper">
        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.3.1.min.js"></script>
        <div id="spam-breakdown-chart" class="plotly-graph-div"></div>
        <script type="text/javascript">
            window.PLOTLYENV = window.PLOTLYENV || {};
            
            var data = [{
                hole: 0.4,
                hovertemplate: "<b>%{label}</b><br>Count: %{value:,}<br>Percent: %{percent}<extra></extra>",
                labels: ["Spam Agent", "Spam Content", "Too Short", "Duplicate", "Passed"],
                marker: {
                    colors: ["#e74c3c", "#f39c12", "#9b59b6", "#3498db", "#2ecc71"]
                },
                textfont: {
                    color: "white",
                    size: 10
                },
                textinfo: "percent",
                textposition: "inside",
                insidetextorientation: "radial",
                values: [6291, 2, 249, 365, 886],
                type: "pie"
            }];
            
            var layout = {
                title: {
                    text: "Filter Breakdown",
                    x: 0.5,
                    font: { size: 14, color: "#4ecdc4" }
                },
                font: {
                    color: "#eee",
                    family: "Inter, system-ui, sans-serif",
                    size: 11
                },
                legend: {
                    orientation: "v",
                    yanchor: "middle",
                    y: 0.5,
                    xanchor: "left",
                    x: 1.02,
                    font: { size: 10 }
                },
                paper_bgcolor: "#1a1a2e",
                plot_bgcolor: "#16213e",
                margin: { l: 20, r: 120, t: 50, b: 20 },
                annotations: [{
                    showarrow: false,
                    text: "7,793<br>Total",
                    x: 0.5,
                    y: 0.5,
                    font: { size: 14, color: "#4ecdc4" }
                }],
                autosize: true
            };
            
            var config = {
                responsive: true,
                displayModeBar: false
            };
            
            Plotly.newPlot("spam-breakdown-chart", data, layout, config);
            
            // Resize handler for responsive updates
            window.addEventListener('resize', function() {
                Plotly.Plots.resize(document.getElementById('spam-breakdown-chart'));
            });
        </script>
    </div>
</body>
</html>
